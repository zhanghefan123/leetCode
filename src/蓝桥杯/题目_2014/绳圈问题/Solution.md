# 1.绳圈问题

现在有100根绳子，当然会有200个绳头
如果任意取绳头两两配对，将所有绳头都打结连接起来，最后会形成若干个绳圈(不考虑是否套在一起)
我们的问题是：请计算最后将形成多少个绳圈的概率最大
注意：结果是一个整数，请通过浏览器提交该数字，不要填写多余的内容

# 2.解题思路


像这种比较大规模的问题，一般从小规模的进行举例，从而进行规律的寻找

举例：

1. 如果仅仅存在一根绳子，那么只能组成1个圈，概率为1
2. 如果存在两根绳子，那么两根绳子自己头尾相连可以形成2个圈，
   本绳绳头连接别绳绳尾，或者本绳绳尾连接别绳绳尾，那么两根绳子可以形成1个圈
   所以生成2个圈的概率为1/3，而生成一个圈的概率为2/3

3. 找到递归公式--状态转移方程

| 绳子数目 | 绳头数目 | 组合数 |
| -------- | -------- | ------ |
| 1        | 2        | 1      |
| 2        | 4        | 3      |
| ……       | ……       | ……     |
| i-1      | 2(i-1)   | c[i-1] |
| i        | 2i       | ?      |

$$
C\left[ i-1 \right] \text{代表}i-1\text{根绳子的配对方法数，每种配对之中都有}i-1\text{根绳子}
\\
C\left[ i \right] \,\,\text{的组成}=\,\,\left\{ \begin{array}{c}
	\begin{array}{l}
	c\left[ i-1 \right] \,\,* 2 * \left( i-1 \right) \,\,: \text{任意圈的任意位置}\left[ i-1\text{根绳子有}i-1\text{个位置} \right] \text{都可以断开，然后让我们的新的绳子接入},\text{接入的数时候绳子可以调换位置}\\
	c\left[ i-1 \right] \,\,: \text{对于每一种配对方式，我这根新的绳子都不参与，我自己自成一圈}\\
\end{array}\\
\end{array} \right. 
\\
\text{所以}C\left[ i \right] \,\,=\,\,C\left[ i-1 \right] \,\,* \left( 2i\,\,-\,\,1 \right)
$$

接下来我们需要完成是将组合数同概率进行完美的结合：

| 绳子数目 | 组合数目 | 概率                          |
| -------- | -------- | ----------------------------- |
| 1        | 1        | 1个圈概率[1]                  |
| 2        | 3        | 1个圈概率[2/3] 2个圈概率[1/3] |
| 3        | 15       | 1个圈概率[8/15] ……            |

我们用递推的思路解决理解上述概率：

用两根绳子组成一个圈的概率是如何演变而来的呢？

先用一根绳子组成一个圈，然后新的绳子必须加入它，加入它可以从一个一个点进行断开，然后有两种方式进行加入，然后因为总的组合数为3，所以概率为2/3

用两根绳子组成两个圈的概率是如何演变而来的呢？

先用一根绳子自己组成一个圈，然后新来的绳子也自己组成一个圈，所以概率为1/3

用三根绳子组成一个圈的概率是如何演变而来的呢？

先用两根绳子组成一个圈，然后第三根绳子并入其中，两根绳子组成一个圈有3 * 2/3 = 2种方式，对于每一种方式，都可以选择两个点进行断开，并交换首尾进行接入，所以方式数位2 * 2 * 2 = 8 ，所以概率为8 / 15 
$$
F\left[ i \right] \left[ 1 \right] \,\,=\,\,F\left[ i-1 \right] \left[ 1 \right] \,\,\times \,\,C\left[ i-1 \right] \,\,\times \,\,\left( i-1 \right) \,\,\times \,\,2 / C\left[ i \right] 
\\
F\left[ i \right] \left[ 1 \right] \,\,\text{是} i\,\,\text{根绳子组成一圈的概率}
\\
C\left[ i-1 \right] \text{是}i-1\text{根绳子的组合数}
\\
\text{因为}C\left[ i \right] \,\,\text{是}i\text{根绳子的组合数} =\,\,C\left[ i-1 \right] \,\,* \left( 2i-1 \right) \,\,\text{所以上式可以进一步化简为}
\\
F\left[ i \right] \left[ 1 \right] \,\,=\,\,F\left[ i-1 \right] \left[ 1 \right] \,\,\times \,\,\left( i-1 \right) \,\,\times \,\,2 / \left( 2i-1 \right)
$$
更加通用的公式如下：
$$
F\left[ i \right] \left[ j \right] \,\,=\,\,F\left[ i-1 \right] \left[ j-1 \right] \,\,\times \,\,C\left[ i-1 \right] \,\,+F\left[ i-1 \right] \left[ j \right] \,\,\times \,\,C\left[ i-1 \right] \,\,\times \,\,\left( i-1 \right) \,\,\times \,\,2 / C\left[ i \right]
$$